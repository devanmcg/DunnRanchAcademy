size = 1) +
geom_sf(aes(fill = signal),
color = 'NA') +
facet_wrap(~period) +
scale_fill_gradientn("Change\n(dNBR)", colors = wes_palette(name = "Zissou1", type = "continuous")) +
theme(plot.margin = unit(c(0,0,0,0), "lines"),
strip.text = element_text(size = 12))
nbr <- ggpubr::ggarrange(gb_nbr_gg,
bi_nbr_gg,
nrow = 2,
common.legend = TRUE,
legend = 'left'
)
dnbr <- ggpubr::ggarrange(gb_dnbr_gg,
bi_dnbr_gg,
nrow = 2,
common.legend = TRUE,
legend = 'right'
)
cowplot::plot_grid(nbr, dnbr,
nrow = 1,
rel_widths = c(2,1))
plot_grid(temps_gg, ros_gg,
nrow = 1,
rel_widths= c(0.6, 0.4))
temps_gg <-
FireBehavior2022$PeakTemps %>%
mutate(logger = as.factor(logger)) %>%
ggplot(aes(x = level,
color = logger)) + theme_bw(14) +
geom_errorbar(aes(ymin = TempMean - TempSE,
ymax = TempMean + TempSE),
position = position_dodge(0.2),
width = 0.2,
lwd = 1) +
geom_point(aes(y = TempMean,
fill = logger,
shape = logger),
color = 'grey40',
size = 3,
stroke = 1.5,
position = position_dodge(0.2)) +
scale_shape_manual(values = c(21, 24, 22),
guide = 'none') +
scale_fill_manual(values = wes_palette('Zissou1')[c(1,4,5)],
guide = 'none') +
scale_color_manual(values = wes_palette('Zissou1')[c(1,4,5)],
guide = 'none') +
labs(x = "Thermocouple level",
y = "Degrees C\n(mean +/- S.E.)",
title = "Maximum temperatures") +
facet_wrap(~date) +
theme(axis.text.x = element_text(color = "black"))
load('./data/FireBehavior2022.Rdata')
temps_gg <-
FireBehavior2022$PeakTemps %>%
mutate(logger = as.factor(logger)) %>%
ggplot(aes(x = level,
color = logger)) + theme_bw(14) +
geom_errorbar(aes(ymin = TempMean - TempSE,
ymax = TempMean + TempSE),
position = position_dodge(0.2),
width = 0.2,
lwd = 1) +
geom_point(aes(y = TempMean,
fill = logger,
shape = logger),
color = 'grey40',
size = 3,
stroke = 1.5,
position = position_dodge(0.2)) +
scale_shape_manual(values = c(21, 24, 22),
guide = 'none') +
scale_fill_manual(values = wes_palette('Zissou1')[c(1,4,5)],
guide = 'none') +
scale_color_manual(values = wes_palette('Zissou1')[c(1,4,5)],
guide = 'none') +
labs(x = "Thermocouple level",
y = "Degrees C\n(mean +/- S.E.)",
title = "Maximum temperatures") +
facet_wrap(~date) +
theme(axis.text.x = element_text(color = "black"))
ros_gg <-
FireBehavior2022$ROS %>%
mutate(logger = as.factor(logger)) %>%
ggplot() + theme_bw(14) +
geom_point(aes(x = date,
y = ros,
fill = logger,
shape = logger),
color = 'grey40',
size = 3,
stroke = 1.5,
position = position_dodge(0.2)) +
scale_shape_manual(values = c(21, 24, 22),
guide = 'none') +
scale_fill_manual(values = wes_palette('Zissou1')[c(1,4,5)],
guide = 'none') +
labs(x = "Burn date",
y = "Rate of spread\n(m/min)",
title = "Rate of spread") +
theme(axis.text.x = element_text(color = "black"))
plot_grid(temps_gg, ros_gg,
nrow = 1,
rel_widths= c(0.6, 0.4))
cowplot::plot_grid(temps_gg, ros_gg,
nrow = 1,
rel_widths= c(0.6, 0.4))
setwd('./paper')
getwd()
bookdownplus::bookdownplus(template = 'mdpi')
pacman::p_load(tidyverse, sf, stars)
load('./data/SpatialData/landsat_crs.Rdata')
setwd("C:/Users/devan.mcgranahan/GithubProjects/DunnRanchAcademy")
burns <- read_sf('./data/SpatialData/BurnUnits',
'DunnRanchBurnUnits') %>%
st_transform(landsat_crs)
load('./data/SpatialData/landsat_crs.Rdata')
burns <- read_sf('./data/SpatialData/BurnUnits',
'DunnRanchBurnUnits') %>%
st_transform(landsat_crs)
# Load stars objects
pre <- read_stars('./data/SpatialData/DunnRanch_pre_2022.tiff') %>%
st_crop(burns)
post <- read_stars('./data/SpatialData/DunnRanch_post_2022.tiff') %>%
st_crop(burns)
delta <- read_stars('./data/SpatialData/DunnRanch_dNBR_2022.tiff') %>%
st_crop(burns)
# combine & convert to sf
multi <- c(pre, post, delta)
dNBR
pre
post
delta
?c.stars
# combine & convert to sf
multi <- c(pre, post, delta, drop_units = TRUE)
?drop_units
c(drop_units(pre),
drop_units(post),
drop_units(delta))
c(units::drop_units(pre),
units::drop_units(post),
units::drop_units(delta))
c(pre, post, delta)
c(pre, post, delta, along = 3)
c(pre, post, delta, along = 1)
# combine & convert to sf
multi <- c(pre, post, delta, along = 1)
dNBR <-
multi %>%
setNames(c('pre', 'post', 'delta')) %>%
st_as_sf() %>%
st_intersection(burns)  %>%
select(-id) %>%
pivot_longer(values_to = 'signal',
names_to = 'period',
cols = c(pre, post, delta)) %>%
mutate(period = factor(period, levels = c("pre", 'post', 'delta')))
multi %>%
setNames(c('pre', 'post', 'delta'))
pacman::p_load(tidyverse, sf, stars)
load('./data/SpatialData/landsat_crs.Rdata')
burns <- read_sf('./data/SpatialData/BurnUnits',
'DunnRanchBurnUnits') %>%
st_transform(landsat_crs)
# Load stars objects
pre <- read_stars('./data/SpatialData/DunnRanch_pre_2022.tiff') %>%
st_crop(burns)
post <- read_stars('./data/SpatialData/DunnRanch_post_2022.tiff') %>%
st_crop(burns)
delta <- read_stars('./data/SpatialData/DunnRanch_dNBR_2022.tiff') %>%
st_crop(burns)
c(pre, post, delta)
merge(pre, post, delta)
c(pre, post, delta, along = 3)
pre
post
c(pre, post)
delta
st_set_dimensions(delta, post)
?st_set_dimensions
st_dimensions(post)
st_set_dimensions(delta) <- st_dimensions(post)
st_set_dimensions(delta,  st_dimensions(post))
dims <- st_dimensions(delta)
st_set_dimensions(pre,  dims)
st_set_dimensions(pre,  values = dims)
st_set_dimensions(pre,  along = 3, values = dims)
dims
st_dimensions(pre)
st_set_dimensions(pre,  along = 2, values = dims )
dims <- st_dimensions(pre)
st_set_dimensions(delta,  along = 2, values = dims )
st_set_dimensions(delta,  along = 2, values = dims, names = 'date' )
st_set_dimensions(delta,  3, values = dims, names = 'date' )
class(dims)
str(dims)
dims[1:2]
dims[[1:2]]
dims[c(1:2)]
select(dims, from, to)
read_stars('./data/SpatialData/DunnRanch_pre_2022.tiff') %>%
st_crop(burns) %>%
st_as_sf() %>%
st_intersection(burns)
read_stars('./data/SpatialData/DunnRanch_pre_2022.tiff') %>%
st_crop(burns) %>%
setNames('pre') %>%
st_as_sf() %>%
st_intersection(burns)
read_stars('./data/SpatialData/DunnRanch_pre_2022.tiff') %>%
st_crop(burns) %>%
setNames('value') %>%
st_as_sf() %>%
st_intersection(burns) %>%
mutate(period = 'pre')
# Load stars objects
bind_rows(
read_stars('./data/SpatialData/DunnRanch_pre_2022.tiff') %>%
st_crop(burns) %>%
setNames('signal') %>%
st_as_sf() %>%
st_intersection(burns) %>%
mutate(period = 'pre'),
read_stars('./data/SpatialData/DunnRanch_post_2022.tiff') %>%
st_crop(burns) %>%
setNames('signal') %>%
st_as_sf() %>%
st_intersection(burns) %>%
mutate(period = 'post')
)
read_stars('./data/SpatialData/DunnRanch_dNBR_2022.tiff') %>%
st_crop(burns) %>%
setNames('signal') %>%
st_as_sf() %>%
st_intersection(burns) %>%
select(-id) %>%
mutate(period = 'delta')
# Load stars objects
bind_rows(
read_stars('./data/SpatialData/DunnRanch_pre_2022.tiff') %>%
st_crop(burns) %>%
setNames('signal') %>%
st_as_sf() %>%
st_intersection(burns) %>%
select(-id) %>%
mutate(period = 'pre'),
read_stars('./data/SpatialData/DunnRanch_post_2022.tiff') %>%
st_crop(burns) %>%
setNames('signal') %>%
st_as_sf() %>%
st_intersection(burns) %>%
select(-id) %>%
mutate(period = 'post') ,
read_stars('./data/SpatialData/DunnRanch_dNBR_2022.tiff') %>%
st_crop(burns) %>%
setNames('signal') %>%
st_as_sf() %>%
st_intersection(burns) %>%
select(-id) %>%
mutate(period = 'delta')
)
dNBR <-
bind_rows(
read_stars('./data/SpatialData/DunnRanch_pre_2022.tiff') %>%
st_crop(burns) %>%
setNames('signal') %>%
st_as_sf() %>%
st_intersection(burns) %>%
select(-id) %>%
mutate(period = 'pre'),
read_stars('./data/SpatialData/DunnRanch_post_2022.tiff') %>%
st_crop(burns) %>%
setNames('signal') %>%
st_as_sf() %>%
st_intersection(burns) %>%
select(-id) %>%
mutate(period = 'post') ,
read_stars('./data/SpatialData/DunnRanch_dNBR_2022.tiff') %>%
st_crop(burns) %>%
setNames('signal') %>%
st_as_sf() %>%
st_intersection(burns) %>%
select(-id) %>%
mutate(period = 'delta')
)
dNBR %>%
filter(Unit == "Bison",
period != "delta") %>%
mutate(period = recode(period,
"pre" = "Pre-burn",
"post" = "Post-burn")) %>%
ggplot() + theme_map() +
geom_sf(aes(fill = signal),
color = 'NA') +
facet_wrap(~period) +
scale_fill_viridis_c("NBR") +
theme(plot.margin = unit(c(0,0,0,0), "lines"),
strip.text = element_text(size = 12))
source('https://raw.githubusercontent.com/devanmcg/rangeR/master/R/CustomGGplotThemes.R')
dNBR %>%
filter(Unit == "Bison",
period != "delta") %>%
mutate(period = recode(period,
"pre" = "Pre-burn",
"post" = "Post-burn")) %>%
ggplot() + theme_map() +
geom_sf(aes(fill = signal),
color = 'NA') +
facet_wrap(~period) +
scale_fill_viridis_c("NBR") +
theme(plot.margin = unit(c(0,0,0,0), "lines"),
strip.text = element_text(size = 12))
save(dNBR, file = './data/dNBR.Rdata')
knitr::opts_chunk$set(echo = FALSE, message=FALSE, warning=FALSE,
fig.path='images/', dev=c('png', 'pdf') )
pacman::p_load(tidyverse, gridExtra, cowplot)
pacman::p_load_gh('devanmcg/wesanderson')
source('https://raw.githubusercontent.com/devanmcg/rangeR/master/R/CustomGGplotThemes.R')
fp = "C:/Users/devan.mcgranahan/GithubProjects/DunnRanchAcademy"
bi_nbr_gg <-
dNBR %>%
filter(Unit == "Bison",
period != "delta") %>%
mutate(period = recode(period,
"pre" = "Pre-burn",
"post" = "Post-burn")) %>%
ggplot() + theme_map() +
geom_sf(aes(fill = signal),
color = 'NA') +
facet_wrap(~period) +
scale_fill_viridis_c("NBR") +
theme(plot.margin = unit(c(0,0,0,0), "lines"),
strip.text = element_text(size = 12))
bb
bi_nbr_gg <-
dNBR %>%
filter(Unit == "Bison",
period != "delta") %>%
mutate(period = recode(period,
"pre" = "Pre-burn",
"post" = "Post-burn")) %>%
ggplot() + theme_map() +
geom_sf(aes(fill = signal),
color = 'NA') +
facet_wrap(~period) +
scale_fill_viridis_c("NBR") +
theme(plot.margin = unit(c(0,0,0,0), "lines"),
strip.text = element_text(size = 12))
bi_dnbr_gg <-
dNBR %>%
filter(Unit == "Bison",
period == "delta") %>%
mutate(period = recode(period,
"delta" = "Severity")) %>%
ggplot() + theme_map() +
geom_sf(aes(fill = signal),
color = 'NA') +
facet_wrap(~period) +
scale_fill_gradientn("Change\n(dNBR)", colors = wes_palette(name = "Zissou1", type = "continuous"))  +
theme(plot.margin = unit(c(0,0,0,0), "lines"),
strip.text = element_text(size = 12))
gb_nbr_gg <-
dNBR %>%
filter(Unit != "Bison",
period != "delta") %>%
mutate(period = recode(period,
"pre" = "Pre-burn",
"post" = "Post-burn")) %>%
ggplot() + theme_map() +
geom_sf(aes(fill = signal),
color = 'NA') +
geom_sf(data = burns %>%
filter(Unit != "Bison"),
fill = NA,
size = 1) +
facet_wrap(~period) +
scale_fill_viridis_c("Normalized\nBurn\nRatio") +
theme(plot.margin = unit(c(0,0,0,0), "lines"),
strip.text = element_text(size = 12))
gb_dnbr_gg <-
dNBR %>%
filter(Unit != "Bison",
period == "delta",
Burned == 'Y') %>%
mutate(period = recode(period,
"delta" = "Severity")) %>%
ggplot() + theme_map() +
geom_sf(data = burns %>%
filter(Unit != "Bison"),
fill = NA,
size = 1) +
geom_sf(aes(fill = signal),
color = 'NA') +
facet_wrap(~period) +
scale_fill_gradientn("Change\n(dNBR)", colors = wes_palette(name = "Zissou1", type = "continuous")) +
theme(plot.margin = unit(c(0,0,0,0), "lines"),
strip.text = element_text(size = 12))
nbr <- ggpubr::ggarrange(gb_nbr_gg,
bi_nbr_gg,
nrow = 2,
common.legend = TRUE,
legend = 'left')
dnbr <- ggpubr::ggarrange(gb_dnbr_gg,
bi_dnbr_gg,
nrow = 2,
common.legend = TRUE,
legend = 'right')
cowplot::plot_grid(nbr, dnbr,
nrow = 1,
rel_widths = c(2,1))
bi_nbr_gg <-
dNBR %>%
filter(Unit == "Bison",
period != "delta") %>%
mutate(period = recode(period,
"pre" = "Pre-burn",
"post" = "Post-burn")) %>%
ggplot() + theme_map() +
geom_sf(aes(fill = signal),
color = 'NA') +
facet_wrap(~period) +
scale_fill_viridis_c("NBR") +
theme(plot.margin = unit(c(0,0,0,0), "lines"),
strip.text = element_text(size = 12))
bi_dnbr_gg <-
dNBR %>%
filter(Unit == "Bison",
period == "delta") %>%
mutate(period = recode(period,
"delta" = "Severity")) %>%
ggplot() + theme_map() +
geom_sf(aes(fill = signal),
color = 'NA') +
facet_wrap(~period) +
scale_fill_gradientn("Change\n(dNBR)", colors = wes_palette(name = "Zissou1", type = "continuous"))  +
theme(plot.margin = unit(c(0,0,0,0), "lines"),
strip.text = element_text(size = 12))
gb_nbr_gg <-
dNBR %>%
filter(Unit != "Bison",
period != "delta") %>%
mutate(period = recode(period,
"pre" = "Pre-burn",
"post" = "Post-burn")) %>%
ggplot() + theme_map() +
geom_sf(aes(fill = signal),
color = 'NA') +
geom_sf(data = burns %>%
filter(Unit != "Bison"),
fill = NA,
size = 1) +
facet_wrap(~period) +
scale_fill_viridis_c("Normalized\nBurn\nRatio") +
theme(plot.margin = unit(c(0,0,0,0), "lines"),
strip.text = element_text(size = 12))
gb_dnbr_gg <-
dNBR %>%
filter(Unit != "Bison",
period == "delta",
Burned == 'Y') %>%
mutate(period = recode(period,
"delta" = "Severity")) %>%
ggplot() + theme_map() +
geom_sf(data = burns %>%
filter(Unit != "Bison"),
fill = NA,
size = 1) +
geom_sf(aes(fill = signal),
color = 'NA') +
facet_wrap(~period) +
scale_fill_gradientn("Change\n(dNBR)", colors = wes_palette(name = "Zissou1", type = "continuous")) +
theme(plot.margin = unit(c(0,0,0,0), "lines"),
strip.text = element_text(size = 12))
nbr <- ggpubr::ggarrange(gb_nbr_gg,
bi_nbr_gg,
nrow = 2,
common.legend = TRUE,
legend = 'left')
dnbr <- ggpubr::ggarrange(gb_dnbr_gg,
bi_dnbr_gg,
nrow = 2,
common.legend = TRUE,
legend = 'right')
cowplot::plot_grid(nbr, dnbr,
nrow = 1,
rel_widths = c(2,1))
?rmarkdown
rmarkdown::render("DunnRanchRedoc.Rmd")
getwd()
rmarkdown::render("/paper/DunnRanchRedoc.Rmd")
rmarkdown::render("./paper/DunnRanchRedoc.Rmd")
rmarkdown::render("./paper/DunnRanchRedoc.Rmd")
?redoc
rmarkdown::render("./paper/DunnRanchRedoc.Rmd", word_document( reference_docx: arial_template.docx))
library(rmarkdown)
rmarkdown::render("./paper/DunnRanchRedoc.Rmd", word_document( reference_docx: arial_template.docx))
rmarkdown::render("./paper/DunnRanchRedoc.Rmd", word_document( reference_docx =  'arial_template.docx'))
unlink('paper/DunnRanchRedoc_cache', recursive = TRUE)
redoc:::dedoc_to_active_file()
getwd()
redoc:::dedoc_to_active_file('./paper/DunnRanchRedoc.docx')
redoc::redoc_extract_rmd('./paper/DunnRanchRedoc.docx', type = 'roundtrip')
redoc:::roundtrip_active_file()
?redoc::redoc_extract_rmd
redoc:::dedoc_to_new_file('./paper/DunnRanchRedoc.docx')
Meanwhile, management of wildland fire operations developed as well, becoming more specialized as standardized command-and-control systems evolved.
Several disatrous fires in 1970 prompted two developments that became the National Wildfire Coordinating Group (NWCG) and the Incident Command System, which the NWCG in turn adopted and agencies widely employed by 1985 [@dague2015; @wilson1978].
The ICS has facilitated cross-boundary collaboration among agencies and jurisdictions in the US as well as among participating nations [@goldammer2004].
But some local fire departments bristle at the constraints of the ICS [@jensen2011], and the hierarchical structure of training, certification, and qualification for positions within the ICS can create a barrier to allowing otherwise experienced personnel conduct prescribed burns.
In fact, as early as the 1980s, the US Fish and Wildlife Service condensed the content of 140 hours worth of NWCG coursework into a 36-hr course that combined principles of both prescribed fire and wildfire suppression, to reflect the changing demands on USFWS personnel [@murphy1987].
